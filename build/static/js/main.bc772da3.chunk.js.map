{"version":3,"sources":["redux/modules/game/actionTypes.js","redux/modules/game/reducer.js","redux/modules/game/index.js","redux/modules/index.js","redux/store.js","constants/game.js","components/Game/Cell/Cell.js","components/Game/Board/Field/Field.js","components/Game/Board/LabelScreen/LabelScreen.js","redux/modules/game/actions.js","components/Game/CellsBackYard/CellsBackYard.js","components/Game/Board/Board.js","utils/matrix.js","components/Game/NextBar/NextFigure/NextFigure.js","components/Game/NextBar/NextBar.js","components/Game/ScoreBar/ScoreBar.js","components/Game/GameTimer/GameTimer.js","components/Game/Game.js","components/Root/Root.js","index.js","serviceWorker.js","components/Game/Board/styles.module.scss","components/Game/GameTimer/styles.module.scss","components/Game/ScoreBar/styles.module.scss","components/Game/NextBar/styles.module.scss","components/Game/Board/LabelScreen/styles.module.scss","components/Game/NextBar/NextFigure/styles.module.scss","components/Game/styles.module.scss","components/Game/Board/Field/styles.module.scss","components/Game/Cell/styles.module.scss"],"names":["SET_GAME_STATE","initialState","Immutable","inGame","showIntro","pause","gameOver","score","cells","newRecord","reducer","state","arguments","length","undefined","action","type","combineReducers","game","configureStore","middleware","thunk","composedEnhancers","compose","apply","applyMiddleware","concat","createStore","rootReducer","TICK_TIME","FIELD_WIDTH","FIELD_HEIGHT","SHUFFLE_SETS_COUNT","KEY_DOWN_REPEAT_TIME","FIGURES","I","matrix","centerOffset","J","L","O","S","T","Z","DIRECTION","UP","RIGHT","DOWN","LEFT","Cell","_cn","cellClassName","_this$props","this","props","x","y","figure","ghost","current","baked","odd","styles","get","figureI","figureJ","figureL","figureO","figureS","figureT","figureZ","blankCell","react_default","a","createElement","className","cn","cell","Object","defineProperty","bakedCell","style","left","top","width","height","React","Component","defaultProps","Field","_React$Component","classCallCheck","possibleConstructorReturn","getPrototypeOf","inherits","createClass","key","value","resultCells","forEach","row","matrixValue","push","Cell_Cell","getIn","field","renderBackedCells","renderGhost","renderCurrent","connect","ownProps","LabelScreen","active","label","blink","screen","generateBlankField","setIn","cleanCells","isDirtyCompare","map","fillNextList","nextList","figuresSet","i","toConsumableArray","keySeq","toArray","shuffle","figureKey","getNewCurrent","size","nextListItem","slice","offset","id","shortId","generate","getGhost","isOk","attemptGhostCurrent","ghostCurrent","testCurrentToCrash","result","checkRecord","personalRecord","localStorage","setItem","set","CellsBackYard","Fragment","IntroScreen","_ref","LabelScreen_LabelScreen","tetris","instructions","howtostart","spaceButton","Board","_getPrototypeOf2","_this","_len","args","Array","_key","call","doGameTick","_ref2","_ref2$doNotRepeat","skip","doNotRepeat","clearGameTickTimeout","gameTick","gameTickTimeoutId","setTimeout","handlePressSpace","e","restartGame","pauseGame","freezeSpaceButton","forceDrop","handlePressEsc","_this$props2","handleKeyDownDown","keyDownPressed","keyDownPressIntervalId","setInterval","handleKeyDownUp","clearInterval","clearTimeout","_this2","moveCurrent","keyboardListener","window","keypress","Listener","register_many","keys","is_exclusive","on_keydown","prevent_repeat","repeatKeyRight","createRepeat","delay","firstTimeDelay","KEY_REPEAT_TIME","start","on_keyup","stop","repeatKeyLeft","reset","prevProps","prevState","snapshot","_this3","totalAdded","_this$props3","timeOver","boardWidth","boardHeight","board","CellsBackYard_CellsBackYard","Board_Field_Field","Board_IntroScreen","marginBottom","cool","fontSize","color","yourScore","_getNewCurrent","_getNewCurrent2","slicedToArray","getItem","_ref$forceDrop","dispatch","getState","newCurrent","addCurrentToCells","_processCompletedRows","completedRowsCount","fullRow","processCompletedRows","_processCompletedRows2","updatedCells","_getNewCurrent3","_getNewCurrent4","direction","reverse","turnOverMatrix","NextFigure","nextItemKey","Math","min","getContainerHeight","getContainerWidth","container","paddingTop","inner","renderCells","NextBar","visible","bar","title","figures","NextFigure_NextFigure","ScoreBar","dist_index_esm","flashDuration","compare","nextProps","superFlashScore","flashScore","GameTimer","time","timerId","tick","setState","setTimeOver","restartTimer","resume","_cn2","widthPercent","timerBar","tracker","okTracker","warningTracker","dangerTracker","noTracker","Game","Game_Board_Board","Game_NextBar_NextBar","Game_ScoreBar_ScoreBar","Game_GameTimer_GameTimer","Root","store","react_redux_es","components_Game_Game","target","document","querySelector","ReactDOM","render","Root_Root","navigator","serviceWorker","ready","then","registration","unregister","module","exports","logoAnimation","spaceButtonAnimation","flashScoreAnimation","superFlashScoreAnimation","screenAppear"],"mappings":"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","file":"static/js/main.bc772da3.chunk.js","sourcesContent":["export const SET_GAME_STATE = 'app/game/SET_GAME_STATE';\n","import * as Immutable from 'immutable';\nimport { SET_GAME_STATE } from './actionTypes';\n\nconst initialState = new Immutable.Map({\n    inGame: false,\n    showIntro: true,\n    pause: false,\n    gameOver: false,\n    score: null,\n    cells: null,\n    newRecord: false,\n});\n\nexport default function reducer(state = initialState, action = {}) {\n    switch (action.type) {\n        case SET_GAME_STATE: {\n            return action.state;\n        }\n        default:\n            return state;\n    }\n}\n","import reducer from './reducer';\n\nexport default reducer;\n","import { combineReducers } from 'redux';\n\nimport game from './game';\n\nexport default combineReducers({\n    game,\n});\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './modules';\n\nconst configureStore = () => {\n    const initialState = {};\n    const enhancers = [];\n    const middleware = [thunk];\n\n    if (process.env.NODE_ENV !== 'production') {\n        const devToolsExtension = window.__REDUX_DEVTOOLS_EXTENSION__;\n\n        if (typeof devToolsExtension === 'function') {\n            enhancers.push(devToolsExtension());\n        }\n    }\n\n    const composedEnhancers = compose(\n        applyMiddleware(...middleware),\n        ...enhancers,\n    );\n\n    const store = createStore(rootReducer, initialState, composedEnhancers);\n\n    if (process.env.NODE_ENV !== 'production') {\n        if (module.hot) {\n            module.hot.accept('./modules', () => {\n                store.replaceReducer(rootReducer);\n            });\n        }\n    }\n\n    return store;\n};\n\nexport default configureStore;\n","import * as Immutable from 'immutable';\n\nexport const GAME_TIME = 60 * 5 * 1000;\n// export const GAME_TIME = 60 * 2 * 1000;\n// export const GAME_TIME = 5* 1000;\nexport const TICK_TIME = 500;\n\nexport const CELL_SIZE_PX = 20;\nexport const CELL_MARGIN_PX = 1;\n\nexport const FIELD_WIDTH = 10;\nexport const FIELD_HEIGHT = 21;\n\n// The number of complete sets of shapes\nexport const SHUFFLE_SETS_COUNT = 3;\n\nexport const KEY_REPEAT_TIME = 100;\nexport const KEY_DOWN_REPEAT_TIME = 30;\n\nexport const FIGURES = Immutable.fromJS({\n    I: {\n        // prettier-ignore\n        matrix: [\n            [0,0,0,0],\n            [1,1,1,1],\n            [0,0,0,0],\n            [0,0,0,0],\n        ],\n        centerOffset: [-1, -2],\n    },\n    J: {\n        // prettier-ignore\n        matrix: [\n            [1,0,0],\n            [1,1,1],\n            [0,0,0]\n        ],\n        centerOffset: [0, -1],\n    },\n    L: {\n        // prettier-ignore\n        matrix: [\n            [0,0,1],\n            [1,1,1],\n            [0,0,0]\n        ],\n        centerOffset: [0, -1],\n    },\n    O: {\n        // prettier-ignore\n        matrix: [\n            [1,1],\n            [1,1],\n        ],\n        centerOffset: [0, 0],\n    },\n    S: {\n        // prettier-ignore\n        matrix: [\n            [0,1,1],\n            [1,1,0],\n            [0,0,0]\n        ],\n        centerOffset: [0, -1],\n    },\n    T: {\n        // prettier-ignore\n        matrix: [\n            [0,1,0],\n            [1,1,1],\n            [0,0,0]\n        ],\n        centerOffset: [0, -1],\n    },\n    Z: {\n        // prettier-ignore\n        matrix: [\n            [1,1,0],\n            [0,1,1],\n            [0,0,0]\n        ],\n        centerOffset: [0, -1],\n    },\n});\n\nexport const DIRECTION = {\n    UP: 0,\n    RIGHT: 1,\n    DOWN: 2,\n    LEFT: 3,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'clsx';\nimport styles from './styles.module.scss';\nimport { CELL_SIZE_PX, FIGURES } from '../../../constants/game';\n\nexport default class Cell extends React.Component {\n    static propTypes = {\n        figure: PropTypes.object,\n        current: PropTypes.bool,\n        baked: PropTypes.bool,\n        ghost: PropTypes.bool,\n        odd: PropTypes.bool,\n        x: PropTypes.number.isRequired,\n        y: PropTypes.number.isRequired,\n    };\n\n    static defaultProps = {\n        figure: null,\n    };\n\n    render() {\n        const { x, y, figure, ghost, current, baked, odd } = this.props;\n\n        let cellClassName;\n\n        if (ghost) {\n            cellClassName = styles.ghost;\n        } else {\n            switch (figure) {\n                case FIGURES.get('I'): {\n                    cellClassName = styles.figureI;\n                    break;\n                }\n                case FIGURES.get('J'): {\n                    cellClassName = styles.figureJ;\n                    break;\n                }\n                case FIGURES.get('L'): {\n                    cellClassName = styles.figureL;\n                    break;\n                }\n                case FIGURES.get('O'): {\n                    cellClassName = styles.figureO;\n                    break;\n                }\n                case FIGURES.get('S'): {\n                    cellClassName = styles.figureS;\n                    break;\n                }\n                case FIGURES.get('T'): {\n                    cellClassName = styles.figureT;\n                    break;\n                }\n                case FIGURES.get('Z'): {\n                    cellClassName = styles.figureZ;\n                    break;\n                }\n                default:\n                    cellClassName = styles.blankCell;\n            }\n        }\n\n        return (\n            <div\n                className={cn(\n                    styles.cell,\n                    cellClassName,\n                    {\n                        [styles.ghost]: ghost,\n                        [styles.current]: current,\n                        [styles.bakedCell]: baked,\n                    },\n                    { [styles.odd]: odd },\n                )}\n                style={{\n                    left: x * CELL_SIZE_PX,\n                    top: y * CELL_SIZE_PX,\n                    width: CELL_SIZE_PX,\n                    height: CELL_SIZE_PX,\n                }}\n            />\n        );\n    }\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Cell from '../../Cell/Cell';\nimport styles from './styles.module.scss';\nimport { FIELD_HEIGHT, FIELD_WIDTH } from '../../../../constants/game';\n\nexport class Field extends React.Component {\n    renderGhost() {\n        const { ghost } = this.props;\n\n        const resultCells = [];\n        ghost.get('matrix').forEach((row, y) => {\n            row.forEach((matrixValue, x) => {\n                if (matrixValue) {\n                    resultCells.push(\n                        <Cell\n                            figure={ghost.get('figure')}\n                            ghost\n                            x={x + ghost.getIn(['offset', 'x'])}\n                            y={y + ghost.getIn(['offset', 'y'])}\n                            key={`GHOST_${y}_${x}`}\n                        />,\n                    );\n                }\n            });\n        });\n\n        return resultCells;\n    }\n\n    renderCurrent() {\n        const { current } = this.props;\n        const resultCells = [];\n        current.get('matrix').forEach((row, y) => {\n            row.forEach((matrixValue, x) => {\n                if (matrixValue) {\n                    resultCells.push(\n                        <Cell\n                            figure={current.get('figure')}\n                            current\n                            x={x + current.getIn(['offset', 'x'])}\n                            y={y + current.getIn(['offset', 'y'])}\n                            key={`${current.get('id')}_${y}_${x}`}\n                        />,\n                    );\n                }\n            });\n        });\n\n        return resultCells;\n    }\n\n    renderBackedCells() {\n        const { cells } = this.props;\n        const resultCells = [];\n        for (let y = 0; y < FIELD_HEIGHT; y += 1) {\n            for (let x = 0; x < FIELD_WIDTH; x += 1) {\n                if (cells.getIn([y, x, 'figure'])) {\n                    resultCells.push(\n                        <Cell\n                            figure={cells.getIn([y, x, 'figure'])}\n                            baked\n                            x={x}\n                            y={y}\n                            key={cells.getIn([y, x, 'id'])}\n                        />,\n                    );\n                }\n            }\n        }\n\n        return resultCells;\n    }\n\n    render() {\n        return (\n            <div className={styles.field}>\n                {this.renderBackedCells()}\n                {this.renderGhost()}\n                {this.renderCurrent()}\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n    return {\n        cells: state.game.get('cells'),\n        current: state.game.get('current'),\n        ghost: state.game.get('ghost'),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    {},\n)(Field);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'clsx';\nimport styles from './styles.module.scss';\n\nexport default class LabelScreen extends React.Component {\n    static propTypes = {\n        active: PropTypes.bool.isRequired,\n        label: PropTypes.node.isRequired,\n        blink: PropTypes.bool,\n    };\n\n    render() {\n        const { active, label, blink } = this.props;\n        if (!active) {\n            return null;\n        }\n\n        return (\n            <div className={styles.screen}>\n                <div className={cn(styles.label, { [styles.blink]: blink })}>{label}</div>\n            </div>\n        );\n    }\n}\n","import * as Immutable from 'immutable';\nimport shortId from 'shortid';\nimport shuffle from 'lodash/shuffle';\nimport { SET_GAME_STATE } from './actionTypes';\nimport { DIRECTION, FIELD_HEIGHT, FIELD_WIDTH, FIGURES, SHUFFLE_SETS_COUNT } from '../../../constants/game';\nimport { turnOverMatrix } from '../../../utils/matrix';\n\nconst blankCell = new Immutable.Map({\n    figure: null,\n});\n\n/**\n * @returns {List}\n */\nfunction generateBlankField() {\n    let cells = new Immutable.Map();\n    for (let y = 0; y < FIELD_HEIGHT; y += 1) {\n        for (let x = 0; x < FIELD_WIDTH; x += 1) {\n            cells = cells.setIn([y, x], blankCell);\n        }\n    }\n    return cells;\n}\n\n/**\n * @param cells\n * @param isDirtyCompare\n * @returns {*}\n */\nfunction cleanCells(cells, isDirtyCompare) {\n    return cells.map(row =>\n        row.map(cell => {\n            if (isDirtyCompare(cell)) {\n                return blankCell;\n            }\n            return cell;\n        }),\n    );\n}\n\n/**\n * @param cells\n * @param current\n * @returns {*}\n */\nfunction addCurrentToCells(cells, current) {\n    current.get('matrix').forEach((row, y) => {\n        row.forEach((matrixValue, x) => {\n            if (matrixValue) {\n                const id = shortId.generate();\n\n                cells = cells.setIn(\n                    [y + current.getIn(['offset', 'y']), x + current.getIn(['offset', 'x'])],\n                    new Immutable.Map({\n                        figure: current.get('figure'),\n                        id,\n                    }),\n                );\n            }\n        });\n    });\n\n    return cells;\n}\n\nfunction fillNextList(nextList) {\n    let figuresSet = [];\n    for (let i = 0; i < SHUFFLE_SETS_COUNT; i += 1) {\n        figuresSet = [...figuresSet, ...FIGURES.keySeq().toArray()];\n    }\n    figuresSet = shuffle(figuresSet);\n    figuresSet.forEach(figureKey => {\n        nextList = nextList.push(figureKey);\n    });\n    return nextList;\n}\n\n/**\n * @param nextList\n * @returns {*[]}\n */\nfunction getNewCurrent(nextList) {\n    if (!nextList) {\n        nextList = new Immutable.List();\n        nextList = fillNextList(nextList);\n    } else if (nextList.size < FIGURES.size * SHUFFLE_SETS_COUNT - 1) {\n        nextList = fillNextList(nextList);\n    }\n\n    // nextList = new Immutable.List(['I','I','I'])\n\n    const nextListItem = nextList.get(0);\n    nextList = nextList.slice(1);\n\n    const figure = FIGURES.get(nextListItem);\n    const current = new Immutable.Map({\n        figure,\n        offset: new Immutable.Map({\n            y: 0 + figure.getIn(['centerOffset', 0]),\n            x: FIELD_WIDTH / 2 + figure.getIn(['centerOffset', 1]),\n        }),\n        matrix: figure.get('matrix'),\n        id: shortId.generate(),\n    });\n\n    return [current, nextList];\n}\n\n/**\n * @param cells\n * @returns {*[]}\n */\nfunction processCompletedRows(cells) {\n    let completedRowsCount = 0;\n\n    let result = generateBlankField();\n\n    for (let y = FIELD_HEIGHT - 1; y >= 0; y -= 1) {\n        let fullRow = true;\n        for (let x = 0; x < FIELD_WIDTH; x += 1) {\n            const cell = cells.getIn([y, x]);\n            fullRow = fullRow && cell.get('figure') !== null;\n        }\n        if (fullRow) {\n            completedRowsCount += 1;\n        } else {\n            result = result.set(y + completedRowsCount, cells.get(y));\n        }\n    }\n\n    return [result, completedRowsCount];\n}\n\n/**\n * @param cells\n * @param current\n * @returns {*|this|this|string[]|Cursor|this|this|this|this}\n */\nfunction getGhost(cells, current) {\n    let ghostCurrent = current;\n    let isOk;\n    let attemptGhostCurrent;\n    do {\n        attemptGhostCurrent = ghostCurrent.setIn(['offset', 'y'], ghostCurrent.getIn(['offset', 'y']) + 1);\n        isOk = !testCurrentToCrash(cells, attemptGhostCurrent);\n\n        if (isOk) {\n            ghostCurrent = attemptGhostCurrent;\n        }\n    } while (isOk);\n\n    return ghostCurrent;\n}\n\n/**\n */\nfunction testCurrentToCrash(cells, current) {\n    const offset = current.get('offset');\n\n    let result = false;\n    current.get('matrix').forEach((row, y) => {\n        if (result) {\n            return;\n        }\n        row.forEach((matrixValue, x) => {\n            if (result) {\n                return;\n            }\n\n            if (!matrixValue) {\n                return;\n            }\n\n            if (y + offset.get('y') < 0) {\n                return;\n            }\n\n            const cell = cells.getIn([y + offset.get('y'), x + offset.get('x')]);\n\n            if (!cell) {\n                result = true;\n                return;\n            }\n            if (cell.get('figure') !== null && !cell.get('isCurrent') && !cell.get('isGhost')) {\n                result = true;\n            }\n        });\n    });\n\n    return result;\n}\n\n/**\n * @param game\n * @returns {*}\n */\nfunction checkRecord(game) {\n    const personalRecord = game.get('personalRecord');\n    const score = game.get('score');\n\n    if (score > personalRecord) {\n        localStorage.setItem('tetris:record', score);\n        game = game.set('personalRecord', score).set('newRecord', true);\n    }\n\n    return game;\n}\n\n/**\n */\nexport function restartGame() {\n    const [current, nextList] = getNewCurrent();\n\n    const cells = generateBlankField();\n\n    const state = new Immutable.Map()\n        .set('totalAdded', 0)\n        .set('score', 0)\n        .set('inGame', true)\n        .set('showIntro', false)\n        .set('pause', false)\n        .set('nextList', nextList)\n        .set('current', current)\n        .set('cells', cells)\n        .set('ghost', getGhost(cells, current))\n        .set('gameOver', false)\n        .set('newRecord', false)\n        .set('personalRecord', localStorage.getItem('tetris:record') || 0);\n\n    return {\n        type: SET_GAME_STATE,\n        state,\n    };\n}\n\n/**\n * @param value\n * @returns {{type: string, value: *}}\n */\nexport function pauseGame(value) {\n    return (dispatch, getState) => {\n        let { game } = getState();\n\n        if (game.get('gameOver') || game.get('showIntro')) {\n            return;\n        }\n\n        game = game.set('pause', value).set('inGame', !value);\n\n        return dispatch({\n            type: SET_GAME_STATE,\n            state: game,\n        });\n    };\n}\n\n/**\n */\nexport function gameTick({ forceDrop = false } = {}) {\n    return (dispatch, getState) => {\n        let { game } = getState();\n\n        if (!game.get('inGame')) {\n            return;\n        }\n\n        let current = game.get('current');\n        let cells = game.get('cells');\n        let score = game.get('score');\n        let nextList = game.get('nextList');\n\n        cells = cleanCells(cells, cell => cell.get('isCurrent') || cell.get('isGhost'));\n\n        const newCurrent = current.setIn(['offset', 'y'], current.getIn(['offset', 'y']) + 1);\n        if (forceDrop) {\n            current = getGhost(cells, current);\n        }\n\n        // Проверяем на готовность прилипнуть\n        if (testCurrentToCrash(cells, newCurrent) || forceDrop) {\n            cells = addCurrentToCells(cells, current);\n            game = game.set('totalAdded', game.get('totalAdded') + 1);\n\n            const [updatedCells, completedRowsCount] = processCompletedRows(cells);\n            cells = updatedCells;\n            if (completedRowsCount === 4) {\n                score += 5;\n            } else {\n                score += completedRowsCount;\n            }\n\n            [current, nextList] = getNewCurrent(nextList);\n\n            if (testCurrentToCrash(cells, current)) {\n                game = checkRecord(game);\n\n                game = game.set('gameOver', true).set('inGame', false);\n            }\n        } else {\n            current = current.setIn(['offset', 'y'], current.getIn(['offset', 'y']) + 1);\n        }\n\n        game = game\n            .set('current', current)\n            .set('ghost', getGhost(cells, current))\n            .set('cells', cells)\n            .set('score', score)\n            .set('nextList', nextList);\n\n        dispatch({\n            type: SET_GAME_STATE,\n            state: game,\n        });\n    };\n}\n\nexport function moveCurrent(direction) {\n    return (dispatch, getState) => {\n        let { game } = getState();\n\n        if (!game.get('inGame')) {\n            return;\n        }\n\n        let current = game.get('current');\n        let cells = game.get('cells');\n\n        cells = cleanCells(cells, cell => cell.get('isCurrent') || cell.get('isGhost'));\n\n        switch (direction) {\n            case DIRECTION.UP: {\n                current = current.set('matrix', turnOverMatrix(current.get('matrix'))).set('id', shortId.generate());\n                break;\n            }\n            case DIRECTION.RIGHT: {\n                current = current.setIn(['offset', 'x'], current.getIn(['offset', 'x']) + 1);\n                break;\n            }\n            case DIRECTION.DOWN: {\n                break;\n            }\n            case DIRECTION.LEFT: {\n                current = current.setIn(['offset', 'x'], current.getIn(['offset', 'x']) - 1);\n                break;\n            }\n            default:\n        }\n\n        if (testCurrentToCrash(cells, current)) {\n            return;\n        }\n\n        game = game\n            .set('current', current)\n            .set('cells', cells)\n            .set('ghost', getGhost(cells, current));\n\n        dispatch({\n            type: SET_GAME_STATE,\n            state: game,\n        });\n    };\n}\n\nexport function setTimeOver() {\n    return (dispatch, getState) => {\n        let { game } = getState();\n\n        game = checkRecord(game);\n\n        game = game\n            .set('gameOver', true)\n            .set('timeOver', true)\n            .set('inGame', false);\n\n        dispatch({\n            type: SET_GAME_STATE,\n            state: game,\n        });\n    };\n}\n","import React from 'react';\nimport { FIELD_HEIGHT, FIELD_WIDTH } from '../../../constants/game';\nimport Cell from '../Cell/Cell';\n\nexport default class CellsBackYard extends React.Component {\n    render() {\n        const cells = [];\n\n        for (let y = 0; y < FIELD_HEIGHT; y += 1) {\n            for (let x = 0; x < FIELD_WIDTH; x += 1) {\n                cells.push(<Cell x={x} y={y} key={`BACK_${y}_${x}`} odd={y % 2 ? !!(x % 2) : !(x % 2)} />);\n            }\n        }\n\n        return <>{cells}</>;\n    }\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport createRepeat from '@avinlab/repeat';\nimport cn from 'clsx';\nimport styles from './styles.module.scss';\nimport {\n    CELL_SIZE_PX,\n    DIRECTION,\n    FIELD_HEIGHT,\n    FIELD_WIDTH,\n    KEY_DOWN_REPEAT_TIME,\n    KEY_REPEAT_TIME,\n    TICK_TIME,\n} from '../../../constants/game';\nimport Field from './Field/Field';\nimport LabelScreen from './LabelScreen/LabelScreen';\nimport { gameTick, moveCurrent, pauseGame, restartGame } from '../../../redux/modules/game/actions';\nimport CellsBackYard from '../CellsBackYard/CellsBackYard';\n\nconst IntroScreen = ({ active }) => (\n    <LabelScreen\n        active={active}\n        label={\n            <div>\n                <div className={styles.tetris}>\n                    Tetris Rush\n                </div>\n                <div className={styles.instructions}>\n                    You only have <br /> 5 minutes!\n                </div>\n                <div className={styles.howtostart}>\n                    Press\n                    <div className={styles.spaceButton}>&lt; SPACE &gt;</div>\n                    to start\n                </div>\n            </div>\n        }\n    />\n);\n\nexport class Board extends React.Component {\n    doGameTick = ({ skip = false, doNotRepeat = false } = {}) => {\n        this.clearGameTickTimeout();\n\n        const { gameTick } = this.props;\n        gameTick();\n\n        if (doNotRepeat) {\n            return;\n        }\n\n        this.gameTickTimeoutId = setTimeout(() => this.doGameTick(), TICK_TIME);\n    };\n\n    clearGameTickTimeout() {\n        if (this.gameTickTimeoutId) {\n            clearTimeout(this.gameTickTimeoutId);\n        }\n    }\n\n    handlePressSpace = e => {\n        const { restartGame, pauseGame, pause, showIntro, gameOver, gameTick } = this.props;\n        if (showIntro || gameOver) {\n            if (!this.freezeSpaceButton) {\n                return restartGame();\n            }\n        }\n        if (pause) {\n            return pauseGame(false);\n        }\n\n        gameTick({ forceDrop: true });\n    };\n\n    handlePressEsc = e => {\n        const { pauseGame, pause } = this.props;\n\n        if (pause) {\n            pauseGame(false);\n        } else {\n            return pauseGame(true);\n        }\n    };\n\n    handleKeyDownDown = () => {\n        this.keyDownPressed = true;\n\n        this.clearGameTickTimeout();\n\n        this.doGameTick({ doNotRepeat: true });\n        this.keyDownPressIntervalId = setInterval(() => {\n            this.doGameTick({ doNotRepeat: true });\n        }, KEY_DOWN_REPEAT_TIME);\n    };\n\n    handleKeyDownUp = () => {\n        this.keyDownPressed = false;\n\n        if (this.keyDownPressIntervalId) {\n            clearInterval(this.keyDownPressIntervalId);\n        }\n        this.doGameTick({ skip: true });\n    };\n\n    componentDidMount() {\n        const { moveCurrent } = this.props;\n        this.keyboardListener = new window.keypress.Listener();\n\n        this.keyboardListener.register_many([\n            {\n                keys: 'space',\n                is_exclusive: true,\n                on_keydown: this.handlePressSpace,\n                prevent_repeat: true,\n            },\n            {\n                keys: 'esc',\n                is_exclusive: true,\n                on_keydown: this.handlePressEsc,\n                prevent_repeat: true,\n            },\n            {\n                keys: 'right',\n                is_exclusive: true,\n                on_keydown: () => {\n                    this.repeatKeyRight = createRepeat({\n                        action: () => {\n                            moveCurrent(DIRECTION.RIGHT);\n                        },\n                        delay: KEY_REPEAT_TIME,\n                        firstTimeDelay: KEY_REPEAT_TIME * 2,\n                    });\n                    this.repeatKeyRight.start();\n                },\n                on_keyup: () => {\n                    if (this.repeatKeyRight) {\n                        this.repeatKeyRight.stop();\n                        this.repeatKeyRight = null;\n                    }\n                },\n                prevent_repeat: true,\n            },\n            {\n                keys: 'left',\n                is_exclusive: true,\n                on_keydown: () => {\n                    this.repeatKeyLeft = createRepeat({\n                        action: () => {\n                            moveCurrent(DIRECTION.LEFT);\n                        },\n                        delay: KEY_REPEAT_TIME,\n                        firstTimeDelay: KEY_REPEAT_TIME * 2,\n                    });\n                    this.repeatKeyLeft.start();\n                },\n                on_keyup: () => {\n                    if (this.repeatKeyLeft) {\n                        this.repeatKeyLeft.stop();\n                    }\n                },\n                prevent_repeat: true,\n            },\n            {\n                keys: 'up',\n                is_exclusive: true,\n                on_keydown: () => {\n                    moveCurrent(DIRECTION.UP);\n                },\n                prevent_repeat: true,\n            },\n            {\n                keys: 'down',\n                is_exclusive: true,\n                on_keydown: this.handleKeyDownDown,\n                on_keyup: this.handleKeyDownUp,\n                prevent_repeat: true,\n            },\n        ]);\n    }\n\n    componentWillUnmount() {\n        this.keyboardListener.reset();\n        this.clearGameTickTimeout();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (!prevProps.inGame && this.props.inGame) {\n            this.doGameTick({ skip: true });\n        }\n\n        if (prevProps.inGame && !this.props.inGame) {\n            this.clearGameTickTimeout();\n        }\n\n        if (!prevProps.gameOver && this.props.gameOver) {\n            // Фризим спейс чтоб случайно сразу не стартануть новую игру\n            this.freezeSpaceButton = true;\n            setTimeout(() => {\n                this.freezeSpaceButton = false;\n            }, 500);\n        }\n\n        if (prevProps.totalAdded !== this.props.totalAdded) {\n            // Отжимаем нажатие вниз\n            if (this.keyDownPressed) {\n                this.handleKeyDownUp();\n            }\n        }\n    }\n\n    render() {\n        const { pause, gameOver, showIntro, timeOver, score, newRecord, personalRecord } = this.props;\n\n        const boardWidth = CELL_SIZE_PX * FIELD_WIDTH;\n        const boardHeight = CELL_SIZE_PX * FIELD_HEIGHT;\n\n        return (\n            <div\n                className={styles.board}\n                style={{\n                    width: boardWidth,\n                    height: boardHeight,\n                }}\n            >\n                <CellsBackYard />\n                {!showIntro && <Field />}\n                <IntroScreen active={showIntro} />\n                <LabelScreen active={pause} label=\"Pause\" blink />\n                <LabelScreen\n                    active={gameOver}\n                    label={\n                        <div>\n                            <div style={{ marginBottom: 20 }}>{timeOver ? 'Time Over' : 'Game Over'}</div>\n                            {newRecord && (\n                                <div className={cn(styles.cool, styles.newRecord)} style={{ fontSize: 30, color: '#293742'  }}>\n                                    NEW RECORD!!\n                                </div>\n                            )}\n                            <div className={styles.yourScore}>Your score: {score}</div>\n                            <div className={styles.personalRecord}>(Personal record: {personalRecord})</div>\n                        </div>\n                    }\n                />\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n    return {\n        showIntro: state.game.get('showIntro'),\n        pause: state.game.get('pause'),\n        inGame: state.game.get('inGame'),\n        gameOver: state.game.get('gameOver'),\n        timeOver: state.game.get('timeOver'),\n        totalAdded: state.game.get('totalAdded'),\n        score: state.game.get('score'),\n        personalRecord: state.game.get('personalRecord'),\n        newRecord: state.game.get('newRecord'),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    {\n        restartGame,\n        gameTick,\n        pauseGame,\n        moveCurrent,\n    },\n)(Board);\n","import * as Immutable from 'immutable';\n\n/**\n * @param matrix\n * @param reverse\n * @returns {List}\n */\n// eslint-disable-next-line sonarjs/cognitive-complexity\nexport function turnOverMatrix(matrix, reverse = false) {\n    let result = new Immutable.List();\n\n    if (reverse) {\n        for (let y = 0; y < matrix.size; y += 1) {\n            for (let x = matrix.get(0).size - 1; x >= 0; x -= 1) {\n                if (!result.get(matrix.get(0).size - 1 - x)) {\n                    result = result.set(matrix.get(0).size - 1 - x, new Immutable.List());\n                }\n                result = result.setIn([matrix.get(0).size - 1 - x, y], matrix.getIn([y, x]));\n            }\n        }\n    } else {\n        for (let y = matrix.size - 1; y >= 0; y -= 1) {\n            for (let x = 0; x < matrix.get(0).size; x += 1) {\n                if (!result.get(x)) {\n                    result = result.set(x, new Immutable.List());\n                }\n                result = result.setIn([x, matrix.size - 1 - y], matrix.getIn([y, x]));\n            }\n        }\n    }\n\n    return result;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.module.scss';\nimport { CELL_SIZE_PX, FIGURES } from '../../../../constants/game';\nimport Cell from '../../Cell/Cell';\n\nexport default class NextFigure extends React.Component {\n    static propTypes = {\n        nextItemKey: PropTypes.string,\n    };\n\n    getContainerWidth() {\n        const { nextItemKey } = this.props;\n        const figure = FIGURES.get(nextItemKey);\n\n        return figure.getIn(['matrix', 0]).size * CELL_SIZE_PX;\n    }\n\n    getContainerHeight() {\n        const { nextItemKey } = this.props;\n        const figure = FIGURES.get(nextItemKey);\n\n        return Math.min(figure.getIn(['matrix']).size * CELL_SIZE_PX, 60);\n    }\n\n    renderCells() {\n        const { nextItemKey } = this.props;\n        const figure = FIGURES.get(nextItemKey);\n\n        const resultCells = [];\n        figure.get('matrix').forEach((row, y) => {\n            row.forEach((matrixValue, x) => {\n                if (matrixValue) {\n                    resultCells.push(<Cell figure={figure} baked x={x} y={y} key={`${y}_${x}`} />);\n                }\n            });\n        });\n\n        return resultCells;\n    }\n\n    render() {\n        const { nextItemKey } = this.props;\n        if (!nextItemKey) {\n            return null;\n        }\n\n        const height = this.getContainerHeight();\n        const width = this.getContainerWidth();\n\n        return (\n            <div className={styles.container} style={{ width, height, paddingTop: height < 60 ? 10 : undefined }}>\n                <div className={styles.inner}>{this.renderCells()}</div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport cn from 'clsx';\nimport styles from './styles.module.scss';\nimport NextFigure from './NextFigure/NextFigure';\n\nexport class NextBar extends React.Component {\n    render() {\n        const { nextList } = this.props;\n        const visible = !!nextList;\n\n        return (\n            <div className={cn(styles.bar, { [styles.visible]: visible })}>\n                <div className={styles.title}>NEXT</div>\n                <div className={styles.figures}>\n                    <NextFigure nextItemKey={nextList && nextList.get(0)} />\n                    <NextFigure nextItemKey={nextList && nextList.get(1)} />\n                    <NextFigure nextItemKey={nextList && nextList.get(2)} />\n                </div>\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n    return {\n        nextList: state.game.get('nextList'),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    {},\n)(NextBar);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport cn from 'clsx';\nimport FlashChange from '@avinlab/react-flash-change';\nimport styles from './styles.module.scss';\n\nexport class ScoreBar extends React.Component {\n    render() {\n        const { score, showIntro } = this.props;\n        const visible = !showIntro;\n\n        return (\n            <div className={cn(styles.bar, { [styles.visible]: visible })}>\n                <div className={styles.title}>Score</div>\n\n                <FlashChange\n                    value={score}\n                    flashDuration={200}\n                    className={styles.score}\n                    compare={(prevProps, nextProps) => {\n                        if (nextProps.value - prevProps.value === 5) {\n                            return styles.superFlashScore;\n                        }\n                        if (nextProps.value > prevProps.value) {\n                            return styles.flashScore;\n                        }\n                        return false;\n                    }}\n                >\n                    {score}\n                </FlashChange>\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n    return {\n        showIntro: state.game.get('showIntro'),\n        score: state.game.get('score'),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    {},\n)(ScoreBar);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport cn from 'clsx';\nimport { GAME_TIME } from '../../../constants/game';\nimport styles from './styles.module.scss';\nimport { setTimeOver } from '../../../redux/modules/game/actions';\n\nexport class GameTimer extends React.Component {\n    state = {\n        time: null,\n    };\n\n    timerId = null;\n\n    tick = () => {\n        const timeDiff = 200;\n\n        this.setState(state => ({\n            time: state.time - timeDiff,\n        }));\n        if (this.state.time <= 0) {\n            this.timeOver();\n        } else {\n            this.timerId = setTimeout(this.tick, timeDiff);\n        }\n    };\n\n    timeOver() {\n        const { setTimeOver } = this.props;\n\n        this.pause();\n        setTimeOver();\n    }\n\n    restartTimer() {\n        this.setState(\n            {\n                time: GAME_TIME,\n            },\n            () => {\n                this.tick();\n            },\n        );\n    }\n\n    pause() {\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n    }\n\n    resume() {\n        this.tick();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if ((prevProps.gameOver && !this.props.gameOver) || (prevProps.showIntro && !this.props.showIntro)) {\n            this.restartTimer();\n        }\n\n        if (!prevProps.pause && this.props.pause) {\n            this.pause();\n        }\n\n        if (prevProps.pause && !this.props.pause) {\n            this.resume();\n        }\n    }\n\n    render() {\n        const { nextList, timeOver, gameOver } = this.props;\n        const { time } = this.state;\n        const visible = !!nextList && !timeOver && !gameOver;\n\n        const widthPercent = (time / GAME_TIME) * 100;\n\n        return (\n            <div className={cn(styles.timerBar, { [styles.visible]: visible })}>\n                <div\n                    className={cn(styles.tracker, {\n                        [styles.okTracker]: widthPercent >= 50,\n                        [styles.warningTracker]: widthPercent >= 20 && widthPercent < 50,\n                        [styles.dangerTracker]: widthPercent < 20 && widthPercent > 0,\n                        [styles.noTracker]: widthPercent === 0,\n                    })}\n                    style={{ width: `${widthPercent}%` }}\n                />\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n    return {\n        showIntro: state.game.get('showIntro'),\n        gameOver: state.game.get('gameOver'),\n        pause: state.game.get('pause'),\n        nextList: state.game.get('nextList'),\n        timeOver: state.game.get('timeOver'),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    {\n        setTimeOver,\n    },\n)(GameTimer);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport styles from './styles.module.scss';\nimport Board from './Board/Board';\nimport NextBar from './NextBar/NextBar';\nimport ScoreBar from './ScoreBar/ScoreBar';\nimport GameTimer from './GameTimer/GameTimer';\n\nexport class Game extends React.Component {\n    render() {\n        return (\n            <div className={styles.game}>\n                <Board />\n                <NextBar />\n                <ScoreBar />\n                <GameTimer />\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n    return {};\n}\n\nexport default connect(\n    mapStateToProps,\n    {},\n)(Game);\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport Game from '../Game/Game';\n\nexport default class Root extends React.Component {\n    render() {\n        const { store } = this.props;\n        return (\n            <Provider store={store}>\n                <div className=\"filler\">\n                    <Game />\n                </div>\n            </Provider>\n        );\n    }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport configureStore from './redux/store';\nimport Root from './components/Root/Root';\nimport './styles/index.scss';\nimport * as serviceWorker from './serviceWorker';\n\nconst store = configureStore();\n\nconst target = document.querySelector('#root');\nReactDOM.render(<Root store={store} />, target);\n\nif (module.hot) {\n    module.hot.accept('./components/Root/Root', () => {\n        ReactDOM.render(<Root store={store} />, target);\n    });\n}\n\nserviceWorker.unregister();\n","export function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"board\":\"styles_board__1R2hD\",\"tetris\":\"styles_tetris__3efN_\",\"logoAnimation\":\"styles_logoAnimation__3JCo8\",\"instructions\":\"styles_instructions__1PK_I\",\"howtostart\":\"styles_howtostart__3caOc\",\"spaceButton\":\"styles_spaceButton__2TMq8\",\"spaceButtonAnimation\":\"styles_spaceButtonAnimation__31qFZ\",\"yourScore\":\"styles_yourScore__ApBWG\",\"personalRecord\":\"styles_personalRecord__2R9Im\",\"newRecord\":\"styles_newRecord__3-_JN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bar\":\"styles_bar__2weV-\",\"title\":\"styles_title__12PMP\",\"timerBar\":\"styles_timerBar__CDYn9\",\"visible\":\"styles_visible__3nHNn\",\"tracker\":\"styles_tracker__2pfef\",\"okTracker\":\"styles_okTracker__bwqOc\",\"warningTracker\":\"styles_warningTracker__3M5E5\",\"dangerTracker\":\"styles_dangerTracker__3E578\",\"noTracker\":\"styles_noTracker__3WrUE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bar\":\"styles_bar__2VB9L\",\"title\":\"styles_title__39oQB\",\"visible\":\"styles_visible__3UFQk\",\"score\":\"styles_score__1wFnR\",\"flashScore\":\"styles_flashScore__3J2Qa\",\"flashScoreAnimation\":\"styles_flashScoreAnimation__20CQ6\",\"superFlashScore\":\"styles_superFlashScore__v3gEQ\",\"superFlashScoreAnimation\":\"styles_superFlashScoreAnimation__1mhdv\",\"figures\":\"styles_figures__kqRWs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bar\":\"styles_bar__1_S-Q\",\"title\":\"styles_title__1rUze\",\"visible\":\"styles_visible__1DPfR\",\"figures\":\"styles_figures__1i6mT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"screen\":\"styles_screen__1t1Ad\",\"screenAppear\":\"styles_screenAppear__2i-jO\",\"label\":\"styles_label__106Fs\",\"blink\":\"styles_blink__1-Qsi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__29a_9\",\"inner\":\"styles_inner__1y4ie\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"game\":\"styles_game__3OTW0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"field\":\"styles_field__3RTgI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"styles_cell__1xdzv\",\"figureI\":\"styles_figureI__2_a1J\",\"figureJ\":\"styles_figureJ__1BDNe\",\"figureL\":\"styles_figureL__3nDLe\",\"figureO\":\"styles_figureO__3l3lg\",\"figureS\":\"styles_figureS__3AsqA\",\"figureT\":\"styles_figureT__-HoM5\",\"figureZ\":\"styles_figureZ__3bE37\",\"blankCell\":\"styles_blankCell__N73wL\",\"ghost\":\"styles_ghost__3nl9Y\",\"odd\":\"styles_odd__1s2Ra\",\"bakedCell\":\"styles_bakedCell__2Choh\",\"current\":\"styles_current__2UsXL\"};"],"sourceRoot":""}